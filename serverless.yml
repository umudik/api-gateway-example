service: umudik-apig-serverless
provider:
  name: aws
  runtime: nodejs14.x
  region: eu-central-1
  websocketsApiName: custom-websockets-api-name
  websocketsApiRouteSelectionExpression: $request.body.action
  websocketsDescription: Custom Serverless Websockets
functions:
  authorizer:
    handler: handler.auth
  connection:
    handler: handler.connection
    events:
      - websocket:
          route: $connect
          authorizer:
            name: authorizer
            identitySource:
              - 'route.request.header.X-Forwarded-Proto'
      - websocket:
          route: $disconnect
      - websocket:
          route: $default